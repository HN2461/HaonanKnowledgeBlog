# 第七篇 综合实战：从风格到产品

> 目标：把前面所有零散的 CSS 能力，真正组合成一套“能落地的设计体系 + 网站”。
>
> 看完这一篇，你应该能：
> - 从无到有，为一个网站搭建色彩、字体、间距、组件的视觉体系；
> - 为整个站点设计合理的 CSS 架构层次；
> - 读懂并实现一份中大型网站的 CSS 实战方案。

-
> 这一章不会写出一个完整产品的所有代码，但会带你走完整个流程：
> - 拿到一份设计稿（或自己定义的目标）之后，如何分析？
> - 如何规划基础样式、布局系统和组件库？
> - 如何一步步搭建页面，并在最后阶段统一风格、优化细节？

## 第18章 从零设计一个现代网站视觉体系

> 这一章解决的核心问题：
> - 如果完全从零开始一个网站，该先定哪些"视觉基础决定"？
> - 色彩、字体、间距这三大系统应该如何搭配？
> - 如何把这些基础映射到 CSS 变量和组件上，让全站风格统一？

### 18.1 色彩系统

一个成熟的网站不会随意挑几种颜色，而是有一套完整的色彩系统：

- **主色（Primary）** - 品牌主色调
- **辅助色/强调色（Accent）** - 用于突出重点
- **成功/警告/错误（Success/Warning/Danger）** - 状态反馈
- **背景/表面（Background/Surface）** - 页面层次
- **文本颜色层级（高对比/次要/弱化）** - 信息层级

#### 18.1.1 基本色板规划

先用一个表格脑补色板（这里只示意，不强调具体数值）：

```txt
主色 Primary      : 蓝色 #2563eb （品牌主色调）
强调色 Accent     : 橙色 #f97316 （CTA按钮、重要操作）
成功 Success      : 绿色 #16a34a （成功提示、正确状态）
警告 Warning      : 黄色 #f59e0b （警告信息）
错误 Danger       : 红色 #dc2626 （错误提示、危险操作）

背景 Background   : #0f172a（深色主题） / #f9fafb（浅色主题）
表面 Surface      : #111827（深色卡片） / #ffffff（浅色卡片）

正文文本 Text     : #0f172a（浅主题） / #e5e7eb（深主题）
次级文本 Muted    : #6b7280 （辅助信息、说明文字）
分隔线 Border     : #e5e7eb（浅） / #1f2937（深）
```

你可以先在设计工具或纸上画出一个简单色卡：

```txt
[ Primary 蓝 ] [ Accent 橙 ] [ Success 绿 ] [ Warning 黄 ] [ Danger 红 ]
[ 背景深色 ]   [ 背景浅色 ]   [ 表面深色 ]   [ 表面浅色 ]
[ 文本主色 ]   [ 文本次级 ]   [ 分隔线色 ]
```

#### 18.1.2 映射为 CSS 变量

在 CSS 中，将这些色彩固化为变量：

```css
/* 全局色彩系统定义 */
:root {
  /* 背景与表面颜色 */
  --color-bg: #f9fafb;          /* 页面背景色 */
  --color-surface: #ffffff;      /* 卡片、模块表面色 */
  
  /* 品牌色系 */
  --color-primary: #2563eb;      /* 主色：品牌蓝 */
  --color-primary-soft: #dbeafe; /* 主色浅色版：用于背景 */
  --color-accent: #f97316;        /* 强调色：橙色，用于CTA */
  
  /* 状态色系 */
  --color-success: #16a34a;      /* 成功：绿色 */
  --color-warning: #f59e0b;      /* 警告：黄色 */
  --color-danger: #dc2626;       /* 危险：红色 */
  
  /* 文本色系 */
  --color-text: #0f172a;          /* 主文本：深色 */
  --color-text-muted: #6b7280;   /* 次要文本：灰色 */
  --color-border: #e5e7eb;       /* 边框颜色 */
}

/* 深色主题变量（可选） */
[data-theme="dark"] {
  --color-bg: #0f172a;
  --color-surface: #1e293b;
  --color-text: #e5e7eb;
  --color-text-muted: #94a3b8;
  --color-border: #334155;
}
```

然后组件层统一引用这些变量，而不是写死颜色：

```css
/* 使用色彩变量的示例 */
body {
  background: var(--color-bg);      /* 使用背景色变量 */
  color: var(--color-text);         /* 使用文本色变量 */
}

.card {
  background: var(--color-surface);  /* 卡片背景使用表面色 */
  border: 1px solid var(--color-border); /* 边框使用边框色 */
}

.btn-primary {
  background: var(--color-primary);  /* 主按钮使用主色 */
}

/* 使用color-mix创建半透明版本 */
.badge--success {
  /* 15%的成功色混合透明，创建浅色背景 */
  background: color-mix(in srgb, var(--color-success) 15%, transparent);
  color: var(--color-success);       /* 文字使用纯色 */
}
```

> 💡 这样一来，你要调整全站的蓝色只需改动 `--color-primary`，所有使用到主色的地方都会随之更新。


### 18.2 字体系统

字体系统包括：

- **字体族（font-family）** - 字体栈配置
- **字号层级（typographic scale）** - 大小层级
- **行高与段落间距** - 阅读体验

#### 18.2.1 字体族与默认字号

在第9章我们已经讨论过常用组合，这里直接落地：

```css
/* 字体系统定义 */
:root {
  /* 系统字体栈：优先使用系统字体，提升性能 */
  --font-sans: system-ui,           /* 通用系统UI字体 */
               -apple-system,        /* macOS/iOS */
               BlinkMacSystemFont,   /* macOS Chrome */
               "Segoe UI",           /* Windows */
               "PingFang SC",        /* macOS/iOS 中文 */
               "Microsoft YaHei",    /* Windows 中文 */
               sans-serif;           /* 兜底无衬线字体 */
  
  /* 等宽字体栈：用于代码展示 */
  --font-mono: "SF Mono",           /* macOS */
               "Monaco",             /* macOS 传统 */
               "Cascadia Code",      /* Windows Terminal */
               "Consolas",           /* Windows */
               monospace;            /* 兜底等宽字体 */
}

/* 基础字体设置 */
html {
  font-size: 16px;                  /* 设置根字号，方便rem计算 */
}

body {
  font-family: var(--font-sans);    /* 应用字体栈 */
  font-size: 1rem;                  /* 16px */
  line-height: 1.7;                 /* 行高1.7倍，舒适阅读 */
  color: var(--color-text);         /* 使用文本色变量 */
}

/* 代码区域使用等宽字体 */
code, pre {
  font-family: var(--font-mono);
}
```

#### 18.2.2 标题层级

定义一套标题层级，确保有明显但合理的差异：

```css
/* 字号规模系统 */
:root {
  --font-size-xs: 0.75rem;   /* 12px - 最小文字 */
  --font-size-sm: 0.875rem;  /* 14px - 辅助文字 */
  --font-size-base: 1rem;    /* 16px - 正文基准 */
  --font-size-lg: 1.125rem;  /* 18px - 稍大正文 */
  --font-size-xl: 1.25rem;   /* 20px - 小标题 */
  --font-size-2xl: 1.5rem;   /* 24px - 二级标题 */
  --font-size-3xl: 1.875rem; /* 30px - 一级标题 */
  --font-size-4xl: 2.25rem;  /* 36px - 页面大标题 */
}

/* 标题样式应用 */
h1 { 
  font-size: var(--font-size-4xl);  /* 最大标题 36px */
  line-height: 1.2;                  /* 大标题行高更紧凑 */
  font-weight: 700;                  /* 加粗 */
}

h2 { 
  font-size: var(--font-size-3xl);  /* 二级标题 30px */
  line-height: 1.25;
  font-weight: 600;
}

h3 { 
  font-size: var(--font-size-2xl);  /* 三级标题 24px */
  line-height: 1.3;
  font-weight: 600;
}

h4 {
  font-size: var(--font-size-xl);   /* 四级标题 20px */
  line-height: 1.4;
  font-weight: 500;
}

/* 辅助文本类 */
.text-small {
  font-size: var(--font-size-sm);   /* 14px 辅助说明 */
}

.text-tiny {
  font-size: var(--font-size-xs);   /* 12px 最小文字 */
}
```

ASCII 梯度图：

```txt
字号层级示意：

H1 ██████████████████ (36px) 页面主标题
H2 ███████████████    (30px) 章节标题
H3 ███████████        (24px) 子章节
H4 █████████          (20px) 小节标题
正文 ███████          (16px) 正文内容
注释 █████           (14px) 辅助说明
最小 ████            (12px) 标签/时间戳
```


### 18.3 间距标准化

良好的间距系统能让页面"呼吸感"一致，不会一块挤一块松。

#### 18.3.1 间距刻度（Space Scale）

常见做法是使用"倍增"或"4 的倍数"刻度，例如：

- 4, 8, 12, 16, 24, 32, 40, 48, 64...

在 CSS 中定义：

```css
/* 间距系统：基于4px倍数 */
:root {
  --space-1: 4px;    /* 最小间距 */
  --space-2: 8px;    /* 小间距 */
  --space-3: 12px;   /* 中小间距 */
  --space-4: 16px;   /* 标准间距 */
  --space-5: 24px;   /* 中等间距 */
  --space-6: 32px;   /* 较大间距 */
  --space-7: 40px;   /* 大间距 */
  --space-8: 48px;   /* 特大间距 */
  --space-10: 64px;  /* 超大间距 */
  --space-12: 80px;  /* 区块间距 */
}
```

示意条：

```txt
间距规模可视化：

1: █ (4px)          元素内最小间距
2: ██ (8px)         图标与文字间距
3: ███ (12px)       输入框内边距
4: ████ (16px)      卡片内边距
5: ███████ (24px)   模块间间距
6: █████████ (32px) 区块内边距
7: ███████████ (40px) 节段间距
8: █████████████ (48px) 大区块间距
```

#### 18.3.2 应用在布局与组件上

示例：

```css
/* 间距系统的实际应用 */

/* 页面区块 */
.section {
  padding: var(--space-6) 0;        /* 上下 32px */
}

.section--hero {
  padding: var(--space-8) 0;        /* Hero区更宽敞: 48px */
}

/* 卡片组件 */
.card {
  padding: var(--space-4);           /* 内边距 16px */
  border-radius: 12px;               /* 圆角 */
}

/* 卡片间距 */
.card + .card {
  margin-top: var(--space-3);        /* 卡片间隔 12px */
}

/* 表单元素 */
.form-group {
  margin-bottom: var(--space-4);     /* 表单组间距 16px */
}

.form-label {
  margin-bottom: var(--space-2);     /* 标签与输入框 8px */
}

/* 按钮组 */
.btn-group {
  display: flex;
  gap: var(--space-3);               /* 按钮间距 12px */
}
```

这样每个页面区域与组件使用的间距都是"刻度内"的值，整体会更统一。


### 18.4 组件统一化

在有了色彩、字体、间距这三套"基础系统"之后，我们要做的是：

- 让组件（Button/Card/Badge/Input/etc.）统一使用这些系统
- 避免组件自己发明新的颜色、字号、间距

#### 18.4.1 示例：统一按钮体系

我们设计一套按钮体系：

```css
/* 按钮基础样式 */
.btn {
  /* 布局 */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.4em;                        /* 图标与文字间距 */
  
  /* 尺寸：使用间距系统 */
  padding: 0.6em var(--space-5);    /* 上下0.6em, 左右24px */
  
  /* 视觉 */
  border-radius: 999px;              /* 完全圆角 */
  border: 1px solid transparent;     /* 预留边框位置 */
  
  /* 字体：使用字号系统 */
  font-size: var(--font-size-sm);   /* 14px */
  font-weight: 500;                  /* 中等粗细 */
  line-height: 1.1;
  
  /* 交互 */
  cursor: pointer;
  transition: all 0.2s ease;
  
  /* 禁用文本选择 */
  user-select: none;
}

/* 主按钮：使用主色 */
.btn--primary {
  background: var(--color-primary);  /* 品牌蓝 */
  color: #fff;
}

.btn--primary:hover {
  /* 悬停时加深，使用CSS原生color-mix */
  background: color-mix(in srgb, var(--color-primary) 85%, black);
  transform: translateY(-1px);       /* 轻微上移 */
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); /* 添加阴影 */
}

/* 强调按钮：使用强调色 */
.btn--accent {
  background: var(--color-accent);   /* 橙色 */
  color: #111827;                    /* 深色文字保证对比度 */
}

/* 幽灵按钮：透明背景 */
.btn--ghost {
  background: transparent;
  color: var(--color-text);
  border-color: var(--color-border);
}

.btn--ghost:hover {
  background: var(--color-primary-soft); /* 悬停显示浅色背景 */
  border-color: var(--color-primary);
}

/* 尺寸变体 */
.btn--sm {
  font-size: var(--font-size-xs);    /* 12px */
  padding: 0.4em var(--space-3);     /* 更小的内边距 */
}

.btn--lg {
  font-size: var(--font-size-base);  /* 16px */
  padding: 0.8em var(--space-6);     /* 更大的内边距 */
}
```

> 💡 第18章从色彩、字体、间距到组件统一化，搭出了"网站视觉体系 + CSS 变量 + 组件"的第一层骨架。接下来第19章，我们会从结构角度，设计完整网站的 CSS 架构。

---

## 第19章 完整网站的 CSS 架构

> 这一章解决的核心问题：
> - 一个稍微大一点的网站，CSS 文件应该怎么分层和组织？
> - Layout / Component / Utility 各自负责什么？
> - ITCSS / SMACSS / OOCSS 这些名词大概在讲什么？

### 19.1 文件结构设计

我们先从一个比较实用的分层结构开始，然后再对比架构流派。

#### 19.1.1 三层视角：Layout / Component / Utility

可以先把 CSS 分为三层：

- **Layout 层**：负责页面的大框架布局
  - 如：header、footer、sidebar、grid 容器、栅格系统
- **Component 层**：负责具体组件
  - 如：按钮、卡片、表单控件、导航菜单、Modal
- **Utility 层**：一些小而精的工具类
  - 如：`.mt-4`（上外边距）、`.text-center`、`.hidden` 等

用一张结构图表述：

```txt
CSS 架构分层模型
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
┌───────────────────────────────┐
│         Base 基础层            │  Reset/Normalize + 变量定义
├───────────────────────────────┤
│        Layout 布局层           │  页面骨架：header/footer/grid
├───────────────────────────────┤
│       Component 组件层         │  可复用组件：Button/Card/Modal
├───────────────────────────────┤
│        Utility 工具层          │  原子类：margin/text/display
├───────────────────────────────┤
│         Page 页面层            │  特定页面的独特样式
└───────────────────────────────┘
           ↑
      特异性递增
```

#### 19.1.2 示例文件结构

结合前面的模块化思路，可以得到类似：

```txt
styles/                        # 样式根目录
│
├── base/                      # 基础层：全局基础
│   ├── _reset.css            # 重置浏览器默认样式
│   ├── _tokens.css           # 设计令牌：颜色、间距、字号变量
│   └── _typography.css       # 全局排版：标题、段落、链接
│
├── layout/                    # 布局层：页面结构
│   ├── _grid.css             # 网格系统
│   ├── _container.css        # 容器布局
│   ├── _header.css           # 页头布局
│   ├── _footer.css           # 页脚布局
│   └── _sidebar.css          # 侧边栏布局
│
├── components/                # 组件层：UI组件
│   ├── _button.css           # 按钮组件
│   ├── _card.css             # 卡片组件
│   ├── _form.css             # 表单组件
│   ├── _badge.css            # 徽章组件
│   ├── _modal.css            # 弹窗组件
│   ├── _dropdown.css         # 下拉菜单
│   └── _navigation.css       # 导航组件
│
├── utilities/                 # 工具层：原子类
│   ├── _spacing.css          # 间距工具：.mt-4/.mb-2
│   ├── _text.css             # 文本工具：.text-center/.text-muted
│   ├── _display.css          # 显示工具：.hidden/.flex
│   └── _colors.css           # 颜色工具：.bg-primary/.text-danger
│
├── pages/                     # 页面层：特定页面
│   ├── home.css              # 首页特有样式
│   ├── pricing.css           # 价格页特有样式
│   └── dashboard.css         # 控制台特有样式
│
└── main.css                   # 入口文件：引入所有模块
```

> 💡 不一定要完全照抄这个结构，但要有"分层"的概念：**不同职责的样式放在不同层中，而不是所有东西都塞进一个文件。**

### 19.2 Layout 层、Component 层、Utility 层

我们再具体看一下三层的职责。

#### 19.2.1 Layout 层

特点：
- 负责页面大结构
- 通常数量不多，但会被很多页面依赖

示例：`_header.css`：

```css
/* 页头布局组件 */
.site-header {
  /* 定位 */
  position: sticky;                   /* 粘性定位 */
  top: 0;                            /* 贴顶 */
  z-index: 50;                       /* 确保在最上层 */
  
  /* 视觉效果 */
  backdrop-filter: blur(12px);       /* 背景模糊 */
  background: rgba(15, 23, 42, 0.88); /* 半透明背景 */
  border-bottom: 1px solid var(--color-border);
  
  /* 动画 */
  transition: all 0.3s ease;
}

/* 页头内容容器 */
.site-header__inner {
  max-width: 1120px;                  /* 最大宽度限制 */
  margin: 0 auto;                     /* 水平居中 */
  padding: 12px 20px;                 /* 内边距 */
  
  /* Flexbox布局 */
  display: flex;
  align-items: center;                /* 垂直居中 */
  justify-content: space-between;     /* 两端对齐 */
}

/* 导航区域 */
.site-header__nav {
  display: flex;
  gap: var(--space-5);                /* 使用间距变量 */
}

/* 响应式 */
@media (max-width: 768px) {
  .site-header__inner {
    padding: 8px 16px;                /* 移动端减小内边距 */
  }
  
  .site-header__nav {
    display: none;                    /* 移动端隐藏，可改为汉堡菜单 */
  }
}
```

#### 19.2.2 Component 层

特点：
- 关注可复用组件
- 每个组件相对独立，可在多个页面使用

示例（卡片组件）已在前面展示，这里展示一个徽章组件：

```css
/* 徽章组件 */
.badge {
  /* 布局 */
  display: inline-flex;
  align-items: center;
  gap: var(--space-1);                /* 4px间距 */
  
  /* 尺寸 */
  padding: 2px 8px;
  
  /* 视觉 */
  border-radius: 999px;               /* 完全圆角 */
  font-size: var(--font-size-xs);     /* 12px */
  font-weight: 500;
  line-height: 1.4;
  
  /* 默认样式 */
  background: var(--color-surface);
  color: var(--color-text-muted);
  border: 1px solid var(--color-border);
}

/* 状态变体 */
.badge--success {
  background: color-mix(in srgb, var(--color-success) 10%, transparent);
  color: var(--color-success);
  border-color: var(--color-success);
}

.badge--warning {
  background: color-mix(in srgb, var(--color-warning) 10%, transparent);
  color: var(--color-warning);
  border-color: var(--color-warning);
}

.badge--danger {
  background: color-mix(in srgb, var(--color-danger) 10%, transparent);
  color: var(--color-danger);
  border-color: var(--color-danger);
}
```

#### 19.2.3 Utility 层

特点：
- 一些小而精、几乎不含语义的小类
- 可以快速在 HTML 上组合使用，提高开发效率

示例：

```css
/* 间距工具类 */
.mt-1 { margin-top: var(--space-1); }   /* 4px */
.mt-2 { margin-top: var(--space-2); }   /* 8px */
.mt-3 { margin-top: var(--space-3); }   /* 12px */
.mt-4 { margin-top: var(--space-4); }   /* 16px */

.mb-1 { margin-bottom: var(--space-1); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }

/* 文本工具类 */
.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.text-muted { color: var(--color-text-muted); }
.text-primary { color: var(--color-primary); }
.text-danger { color: var(--color-danger); }

/* 显示工具类 */
.hidden { display: none !important; }
.block { display: block; }
.inline-block { display: inline-block; }
.flex { display: flex; }
.inline-flex { display: inline-flex; }
.grid { display: grid; }
```

> 💡 这些 Utility 类要适量使用：对于通用的小调整很方便，但不要放任页面全部写成"类名堆砌"，还是要保留组件层的封装。

---

> 第19章从文件结构和分层架构的角度，帮助你为网站的 CSS 建立一个清晰的"地基 + 骨架 + 皮肤"模型。接下来第20章，我们会做一次"从设计稿到上线页面"的完整实战。

## 第20章 超大型综合实战

> 这一章不会写出一个完整产品的所有代码，但会带你走完整个流程：
> - 拿到一份设计稿（或自己定义的目标）之后，如何分析？
> - 如何规划基础样式、布局系统和组件库？
> - 如何一步步搭建页面，并在最后阶段统一风格、优化细节？

### 20.1 设计稿分析

假设我们要做一个"现代 SaaS 产品官网"首页，典型结构：

- 顶部导航（Logo + 导航 + CTA 按钮）
- Hero 区域（主标题 + 副标题 + 行动按钮 + 示意图）
- 功能区（3~4 个卡片）
- 客户评价 / 成功案例
- 底部 CTA 区域
- 页脚

#### 20.1.1 提取关键要素

从设计稿中提取：

- 色彩：主色、背景、卡片表面、强调色
- 字体：标题层级、正文、辅助文字样式
- 间距：各区块之间的上下间距、卡片内边距
- 组件：Button、Card、Badge、Input、Layout 模块（Hero、Feature、Footer）

可以画一张"信息架构 + 组件清单"：

```txt
布局模块：
- Header（顶部导航）
- Hero（主视觉区）
- Features（功能展示）
- Testimonials（客户评价）
- Call-to-Action（行动召唤）
- Footer（页脚）

基础组件：
- Button（按钮）
- Card（卡片）
- Badge（徽章）
- Input（输入框）
- Logo 区
```

### 20.2 基础样式搭建

第一步不是直接堆内容，而是搭建：

- 基础变量（颜色、字号、间距）
- 全局排版和容器

#### 20.2.1 基础 tokens

在一个 `_tokens.css` 或类似文件中定义：

```css
/* 设计系统核心变量 */
:root {
  /* 深色主题色彩 */
  --color-bg: #020617;                         /* 深色背景 */
  --color-surface: #111827;                    /* 卡片表面 */
  --color-primary: #38bdf8;                    /* 天蓝色主色 */
  --color-primary-soft: rgba(56, 189, 248, 0.18); /* 主色半透明版 */
  --color-accent: #f97316;                     /* 橙色强调色 */
  --color-text: #e5e7eb;                       /* 浅色文本 */
  --color-text-muted: #9ca3af;                 /* 弱化文本 */
  
  /* 间距系统 */
  --space-1: 4px;    /* 极小间距 */
  --space-2: 8px;    /* 小间距 */
  --space-3: 12px;   /* 中小间距 */
  --space-4: 16px;   /* 标准间距 */
  --space-5: 24px;   /* 中等间距 */
  --space-6: 32px;   /* 大间距 */
  --space-7: 40px;   /* 较大间距 */
  --space-8: 48px;   /* 特大间距 */
}
```

#### 20.2.2 全局排版和容器

```css
/* 全局基础样式 */
body {
  margin: 0;                                    /* 清除默认边距 */
  
  /* 系统字体栈 */
  font-family: system-ui,                       /* 通用系统字体 */
    -apple-system, BlinkMacSystemFont,          /* Apple系统 */
    "Segoe UI",                                 /* Windows */
    "PingFang SC", "Microsoft YaHei",           /* 中文字体 */
    sans-serif;                                 /* 兜底字体 */
  
  /* 径向渐变背景：从左上角扩散 */
  background: radial-gradient(
    circle at 0% 0%,                           /* 圆形，起点左上角 */
    #0f172a,                                    /* 深蓝灰 */
    #020617                                     /* 更深的蓝黑 */
  );
  
  color: var(--color-text);                    /* 使用文本色变量 */
}

/* 内容容器 */
.container {
  max-width: 1120px;                           /* 最大宽度限制 */
  margin: 0 auto;                              /* 水平居中 */
  padding: 0 16px;                             /* 左右内边距，移动端安全 */
}

/* 页面区块 */
.section {
  padding: var(--space-7) 0;                   /* 上下40px */
}

/* Hero区块特殊处理 */
.section--hero {
  padding-top: var(--space-8);                 /* 上48px */
  padding-bottom: var(--space-8);              /* 下48px */
}
```

到这里，你已经有了：统一色彩、间距的基础，以及复用的 `.container`、`.section`。


### 20.3 布局系统实现

接下来，为各个大模块实现布局：

- Header：水平布局，Logo + 导航 + CTA
- Hero：两列布局（左文案，右插图）
- Features：卡片网格

#### 20.3.1 Header 布局

HTML：

```html
<header class="site-header">
  <div class="container site-header__inner">
    <a class="site-logo" href="#">SaaSKit</a>
    <nav class="site-nav">
      <a href="#">功能</a>
      <a href="#">价格</a>
      <a href="#">案例</a>
    </nav>
    <button class="btn btn--primary btn--sm">免费试用</button>
  </div>
</header>
```

CSS：

```css
/* 顶部导航栏样式 */
.site-header {
  position: sticky;                    /* 粘性定位，滚动时固定 */
  top: 0;                             /* 贴顶 */
  z-index: 50;                        /* 确保在其他内容上方 */
  
  /* 毛玻璃效果 */
  backdrop-filter: blur(16px);        /* 背景模糊16px */
  -webkit-backdrop-filter: blur(16px); /* Safari兼容 */
  
  /* 半透明深色背景 */
  background: rgba(2, 6, 23, 0.9);    /* 90%不透明度 */
}

/* 导航栏内容容器 */
.site-header__inner {
  display: flex;                      /* 弹性布局 */
  align-items: center;                /* 垂直居中 */
  justify-content: space-between;     /* 两端对齐：logo左，按钮右 */
  padding: 12px 0;                    /* 上下内边距 */
}

/* 导航链接组 */
.site-nav {
  display: flex;                      /* 水平排列 */
  gap: var(--space-4);               /* 链接间距16px */
}

/* 导航链接样式 */
.site-nav a {
  color: var(--color-text-muted);    /* 默认弱化色 */
  text-decoration: none;              /* 去除下划线 */
  transition: color 0.2s;             /* 颜色过渡 */
}

.site-nav a:hover {
  color: var(--color-primary);       /* 悬停时主色 */
}
```

#### 20.3.2 Hero 区布局

HTML：

```html
<section class="section section--hero">
  <div class="container hero">
    <div class="hero__content">
      <h1 class="hero__title">用清晰的 CSS 体系构建你的下一款产品</h1>
      <p class="hero__subtitle">从设计到上线，一套完整的 CSS 实战路径。</p>
      <div class="hero__actions">
        <button class="btn btn--primary">立即开始</button>
        <button class="btn btn--ghost">查看案例</button>
      </div>
    </div>
    <div class="hero__media">
      <!-- 可以是插画或截图占位 -->
      <div class="hero-illustration"></div>
    </div>
  </div>
</section>
```

CSS：

```css
/* Hero区主容器 */
.hero {
  display: grid;                              /* 网格布局 */
  grid-template-columns: 
    minmax(0, 1.2fr)                         /* 左侧内容：1.2份，最小0 */
    minmax(0, 1fr);                          /* 右侧媒体：1份，最小0 */
  gap: var(--space-7);                       /* 列间距40px */
  align-items: center;                       /* 垂直居中对齐 */
}

/* 响应式：移动端单列 */
@media (max-width: 768px) {
  .hero {
    grid-template-columns: 1fr;              /* 单列布局 */
    text-align: center;                      /* 文字居中 */
  }
  
  .hero__media {
    display: none;                           /* 移动端隐藏插图 */
  }
}

/* Hero标题 */
.hero__title {
  /* clamp()响应式字号：最小28px，理想5vw，最大40px */
  font-size: clamp(28px, 5vw, 40px);
  line-height: 1.2;                          /* 紧凑行高 */
  margin-bottom: var(--space-3);            /* 下边距12px */
  
  /* 渐变文字效果（可选） */
  background: linear-gradient(135deg, 
    var(--color-primary), 
    var(--color-accent));
  -webkit-background-clip: text;             /* 文字裁剪 */
  -webkit-text-fill-color: transparent;      /* 文字透明 */
}

/* Hero副标题 */
.hero__subtitle {
  color: var(--color-text-muted);           /* 弱化文字色 */
  margin-bottom: var(--space-5);            /* 下边距24px */
  font-size: 1.125rem;                      /* 18px */
  line-height: 1.6;                         /* 舒适行高 */
}

/* 按钮组容器 */
.hero__actions {
  display: flex;                            /* 弹性布局 */
  gap: var(--space-3);                      /* 按钮间距12px */
  flex-wrap: wrap;                          /* 允许换行 */
}
```


### 20.4 组件库构建

在完成基础布局后，你可以抽离所有常见元素为组件：

- Buttons：主按钮、次按钮、幽灵按钮
- Cards：功能卡片、价格卡片、客户评价卡片
- Badges：状态标签
- Inputs：表单控件
- Layouts：Grid 行、列、容器

关键点：

- 组件的 CSS 尽量只依赖 tokens（变量），不直接写魔法数
- 在多个页面复用时，避免为每页再单独起一套类似的类

你可以在 `components/` 目录下按文件拆分：

```txt
components/
  _button.css
  _card.css
  _badge.css
  _form.css
  _hero.css
  _feature-list.css
```

有了这些组件，新增一个页面会更像是“拼积木”，而不是从零开始写一坨样式。


### 20.5 全站风格统一化与优化

最后一环是“统一与打磨”：

#### 20.5.1 自查 checklist

可以有一个简单的检查列表：

- 色彩：主色和辅助色是否统一？是否有明显“多出来的”色值？
- 字体：标题层级在所有页面是否一致？正文是否统一？
- 间距：是否都来自统一的 space 刻度？有没有特别奇怪的数值？
- 组件：同类型组件（卡片、按钮）在不同页面是否风格统一？

#### 20.5.2 简单工具支持

- 用编辑器/IDE 的“查找引用”功能，查看某颜色或 class 的使用场景
- 用 Stylelint 之类工具对 CSS 进行规则检查（如禁止使用某些魔法色值）

#### 20.5.3 性能与可维护性复查

- 运行构建并查看最终 CSS 体积是否合理
- 检查是否有大量未使用的类（结合 PurgeCSS 等工具）
- 对关键页面做一次性能录制，确认动效不会卡顿

> 真正成熟的 CSS 工程，是在一次又一次这样的“搭建 → 抽象 → 统一 → 优化”循环中形成的。每做完一个项目，都可以回顾：哪些地方可以通过更好的变量、更清晰的组件、更合理的架构来改进。

---

> 第七篇通过视觉体系、架构分层和一场综合实战，把前面所有章节的知识串成了一条“从风格到产品”的完整路径。到这里，你已经具备从 0 到 1 构建一个中小型网站 CSS 体系的能力。接下来的第八篇将以番外的形式，补充一些工具、技巧和速查内容，方便你在实际工作中快速查阅与解决问题。

## 第18章 从零设计一个现代网站视觉体系

> 这一章解决的核心问题：
> - 如果完全从零开始一个网站，该先定哪些“视觉基础决定”？
> - 色彩、字体、间距这三大系统应该如何搭配？
> - 如何把这些基础映射到 CSS 变量和组件上，让全站风格统一？

### 18.1 色彩系统

一个成熟的网站不会随意挑几种颜色，而是有一套完整的色彩系统：

- 主色（Primary）
- 辅助色/强调色（Accent）
- 成功/警告/错误（Success / Warning / Danger）
- 背景/表面（Background / Surface）
- 文本颜色层级（高对比/次要/弱化）

#### 18.1.1 基本色板规划

先用一个表格脑补色板（这里只示意，不强调具体数值）：

```txt
主色 Primary      : 蓝色 #2563eb
强调色 Accent     : 橙色 #f97316
成功 Success      : 绿色 #16a34a
警告 Warning      : 黄色 #f59e0b
错误 Danger       : 红色 #dc2626

背景 Background   : #0f172a（深） / #f9fafb（浅）
表面 Surface      : #111827（深） / #ffffff（浅）

正文文本 Text     : #0f172a（浅主题） / #e5e7eb（深主题）
次级文本 Muted    : #6b7280
分隔线 Border     : #e5e7eb / #1f2937
```

你可以先在设计工具或纸上画出一个简单色卡：

```txt
[ Primary 蓝 ] [ Accent 橙 ] [ Success 绿 ] [ Warning 黄 ] [ Danger 红 ]
[ 背景深色 ]   [ 背景浅色 ]   [ 表面深色 ]   [ 表面浅色 ]
[ 文本主色 ]   [ 文本次级 ]   [ 分隔线色 ]
```

#### 18.1.2 映射为 CSS 变量

在 CSS 中，将这些色彩固化为变量：

```css
:root {
  --color-bg: #f9fafb;
  --color-surface: #ffffff;

  --color-primary: #2563eb;
  --color-primary-soft: #dbeafe;
  --color-accent: #f97316;

  --color-success: #16a34a;
  --color-warning: #f59e0b;
  --color-danger: #dc2626;

  --color-text: #0f172a;
  --color-text-muted: #6b7280;
  --color-border: #e5e7eb;
}
```

然后组件层统一引用这些变量，而不是写死颜色：

```css
body {
  background: var(--color-bg);
  color: var(--color-text);
}

.card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
}

.btn-primary {
  background: var(--color-primary);
}

.badge--success {
  background: color-mix(in srgb, var(--color-success) 15%, transparent);
  color: var(--color-success);
}
```

> 这样一来，你要调整全站的蓝色只需改动 `--color-primary`，所有使用到主色的地方都会随之更新。


### 18.2 字体系统

字体系统包括：

- 字体族（font-family）
- 字号层级（typographic scale）
- 行高与段落间距

#### 18.2.1 字体族与默认字号

在第9章我们已经讨论过常用组合，这里直接落地：

```css
:root {
  --font-sans: system-ui, -apple-system, BlinkMacSystemFont,
    "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
}

html {
  font-size: 16px;
}

body {
  font-family: var(--font-sans);
  font-size: 1rem;  /* 16px */
  line-height: 1.7;
  color: var(--color-text);
}
```

#### 18.2.2 标题层级

定义一套标题层级，确保有明显但合理的差异：

```css
:root {
  --font-size-xs: 0.75rem;  /* 12px */
  --font-size-sm: 0.875rem; /* 14px */
  --font-size-base: 1rem;   /* 16px */
  --font-size-lg: 1.125rem; /* 18px */
  --font-size-xl: 1.25rem;  /* 20px */
  --font-size-2xl: 1.5rem;  /* 24px */
  --font-size-3xl: 1.875rem;/* 30px */
  --font-size-4xl: 2.25rem; /* 36px */
}

h1 { font-size: var(--font-size-4xl); line-height: 1.2; }
h2 { font-size: var(--font-size-3xl); line-height: 1.25; }
h3 { font-size: var(--font-size-2xl); line-height: 1.3; }
```

ASCII 梯度图：

```txt
H1 ██████████████████ (36px)
H2 ███████████████    (30px)
H3 ███████████        (24px)
H4 █████████          (20px)
正文 ███████          (16px)
注释 █████           (14px)
```


### 18.3 间距标准化

良好的间距系统能让页面“呼吸感”一致，不会一块挤一块松。

#### 18.3.1 间距刻度（Space Scale）

常见做法是使用“倍增”或“4 的倍数”刻度，例如：

- 4, 8, 12, 16, 24, 32, 40, 48, 64...

在 CSS 中定义：

```css
:root {
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 24px;
  --space-6: 32px;
  --space-7: 40px;
  --space-8: 48px;
}
```

示意条：

```txt
1: █ (4px)
2: ██ (8px)
3: ███ (12px)
4: ████ (16px)
5: ███████ (24px)
6: █████████ (32px)
```

#### 18.3.2 应用在布局与组件上

示例：

```css
.section {
  padding: var(--space-6) 0;   /* 上下 32px */
}

.section--hero {
  padding: var(--space-8) 0;   /* 上下 48px */
}

.card {
  padding: var(--space-4);
}

.card + .card {
  margin-top: var(--space-3);
}
```

这样每个页面区域与组件使用的间距都是“刻度内”的值，整体会更统一。


### 18.4 组件统一化

在有了色彩、字体、间距这三套“基础系统”之后，我们要做的是：

- 让组件（Button / Card / Badge / Input / etc.）统一使用这些系统；
- 避免组件自己发明新的颜色、字号、间距。

#### 18.4.1 示例：统一按钮体系

我们设计一套按钮体系：

- 颜色使用 `--color-primary` / `--color-accent` 等
- 间距使用 `--space-*`
- 字号使用 `--font-size-*`

```css
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.4em;
  padding: 0.6em var(--space-5);
  border-radius: 999px;
  border: 1px solid transparent;
  font-size: var(--font-size-sm);
  font-weight: 500;
  line-height: 1.1;
}

.btn--primary {
  background: var(--color-primary);
  color: #fff;
}

.btn--accent {
  background: var(--color-accent);
  color: #111827;
}

.btn--ghost {
  background: transparent;
  color: var(--color-text);
  border-color: var(--color-border);
}
```

你会发现：

- 不再出现“按钮想用啥颜色就写啥颜色”的情况
- 想调整按钮整体风格，可以从变量层统一调整

#### 18.4.2 示例：统一卡片体系

```css
.card {
  padding: var(--space-5);
  border-radius: 16px;
  background: var(--color-surface);
  border: 1px solid rgba(148, 163, 184, 0.4);
  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.15);
}

.card__title {
  font-size: var(--font-size-lg);
  font-weight: 600;
  margin-bottom: var(--space-2);
}

.card__subtitle {
  font-size: var(--font-size-sm);
  color: var(--color-text-muted);
  margin-bottom: var(--space-4);
}
```

不同页面上的卡片，都只允许在这套基础上做少量 modifier，而不是各写一套独特的卡片样式。

#### 18.4.3 从“视觉体系”到“编码体系”

可以用一张简单的对应表总结：

```txt
视觉设计层面：

- 色彩系统 → primary / accent / success / warning / danger / bg / surface / text
- 字体系统 → 标题层级 / 正文 / 辅助文字
- 间距系统 → 4/8/12/16/24/32...

CSS 编码层面：

- :root 中的 CSS 变量
- 组件使用这些变量作为唯一来源
- 页面层只做少量补充，不绕开系统乱写
```

---

> 第18章从色彩、字体、间距到组件统一化，搭出了“网站视觉体系 + CSS 变量 + 组件”的第一层骨架。接下来第19章，我们会从结构角度，设计完整网站的 CSS 架构：文件如何组织、层与层之间如何分工，以及不同 CSS 架构思想之间的差异。

## 第19章 完整网站的 CSS 架构

> 这一章解决的核心问题：
> - 一个稍微大一点的网站，CSS 文件应该怎么分层和组织？
> - Layout / Component / Utility 各自负责什么？
> - ITCSS / SMACSS / OOCSS 这些名词大概在讲什么？

### 19.1 文件结构设计

我们先从一个比较实用的分层结构开始，然后再对比架构流派。

#### 19.1.1 三层视角：Layout / Component / Utility

可以先把 CSS 分为三层：

- **Layout 层**：负责页面的大框架布局
  - 如：header、footer、sidebar、grid 容器、栅格系统
- **Component 层**：负责具体组件
  - 如：按钮、卡片、表单控件、导航菜单、Modal
- **Utility 层**：一些小而精的工具类
  - 如：`.mt-4`（上外边距）、`.text-center`、`.hidden` 等

用一张结构图表述：

```txt
CSS 架构

┌───────────────┐
│ Layout        │  页面骨架：header/footer/布局栅格
├───────────────┤
│ Component     │  组件：Button/Card/Modal/Nav...
├───────────────┤
│ Utility       │  小工具类：margin/text/隐藏等
└───────────────┘
```

#### 19.1.2 示例文件结构

结合前面的模块化思路，可以得到类似：

```txt
styles/
  base/
    _reset.css
    _tokens.css       # 颜色、间距、字号等变量
    _typography.css

  layout/
    _grid.css
    _header.css
    _footer.css
    _sidebar.css

  components/
    _button.css
    _card.css
    _form.css
    _badge.css
    _modal.css

  utilities/
    _spacing.css      # .mt-4/.mb-2 等
    _text.css         # .text-center/.text-muted
    _display.css      # .hidden/.inline-flex

  pages/
    home.css
    pricing.css
    dashboard.css
```

> 不一定要完全照抄这个结构，但要有“分层”的概念：**不同职责的样式放在不同层中，而不是所有东西都塞进一个文件。**


### 19.2 Layout 层、Component 层、Utility 层

我们再具体看一下三层的职责。

#### 19.2.1 Layout 层

特点：

- 负责页面大结构
- 通常数量不多，但会被很多页面依赖

示例：`_header.css`：

```css
.site-header {
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(12px);
  background: rgba(15, 23, 42, 0.88);
}

.site-header__inner {
  max-width: 1120px;
  margin: 0 auto;
  padding: 12px 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
```

#### 19.2.2 Component 层

特点：

- 关注可复用组件
- 每个组件相对独立，可在多个页面使用

示例：`_card.css`（已经在前面多次出现，不再赘述）

#### 19.2.3 Utility 层

特点：

- 一些小而精、几乎不含语义的小类
- 可以快速在 HTML 上组合使用，提高开发效率

示例：

```css
.mt-4 { margin-top: 16px; }
.mb-2 { margin-bottom: 8px; }

.text-center { text-align: center; }
.text-muted  { color: var(--color-text-muted); }

.hidden { display: none !important; }
.inline-flex { display: inline-flex; }
```

这些 Utility 类要适量使用：

- 对于通用的小调整很方便
- 但不要放任页面全部写成“类名堆砌”，还是要保留组件层的封装


### 19.3 常见架构模式比较（ITCSS、SMACSS、OOCSS）

这里不做特别深入的框架研究，只建立一个大致印象，方便你读其他资料时有概念。

#### 19.3.1 OOCSS（面向对象 CSS）

核心思想：

- 把视觉元素拆分为“结构（Structure）”和“皮肤（Skin）”
- 鼓励复用“对象”，比如 `.media` 对象（图 + 文）

简单例子：

```css
.media {
  display: flex;
  align-items: flex-start;
}

.media__img {
  margin-right: 12px;
}

.media__body {
  flex: 1;
}

.card-skin {
  border-radius: 12px;
  border: 1px solid var(--color-border);
  background: #fff;
}
```

然后在不同地方复用 `.media` 结构 + 不同皮肤。

#### 19.3.2 SMACSS（Scalable and Modular Architecture for CSS）

大致把规则分为：

- Base（基础）
- Layout（布局）
- Module（模块）
- State（状态）
- Theme（主题）

你会发现这和我们现在的分层思路是互通的，只是命名略有不同。

#### 19.3.3 ITCSS（Inverted Triangle CSS）

ITCSS 把整个 CSS 看成一个倒三角：

```txt
        Settings   （变量、配置）
       Tools       （函数、mixins）
      Generic      （Normalize、Reset）
     Elements      （基础 HTML 元素样式）
    Objects        （布局与对象，如 media object）
   Components      （具体组件）
  Utilities        （小工具类）
```

层级越往下，具体性越强，影响范围越小。

我们在本书中采用的是一个较为折中的、实践向的架构方式，你可以在未来接触更多资料时，把这些理论和自己的实践互相对照。
