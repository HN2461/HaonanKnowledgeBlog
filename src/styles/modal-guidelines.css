/**
 * 弹窗组件CSS最佳实践指南
 * 
 * 问题：在Vue组件中，如果弹窗元素的父容器有特殊定位(如position: sticky, z-index)，
 * 弹窗可能被限制在父容器内，导致显示位置不正确。
 * 
 * 解决方案：使用Vue的Teleport功能将弹窗传送到body元素下，
 * 并设置正确的z-index值。
 */

/* 弹窗层级管理 */
:root {
  /* Z-index层级定义 */
  --z-header: 100;          /* AppHeader的z-index */
  --z-sidebar: 99;          /* 移动端Sidebar */
  --z-dropdown: 200;        /* 下拉菜单 */
  --z-tooltip: 300;         /* 工具提示 */
  --z-modal: 9999;          /* 普通弹窗 */
  --z-modal-high: 10000;    /* 高优先级弹窗（如图片预览） */
  --z-toast: 10001;         /* 消息提示 */
}

/* 通用弹窗基础样式 */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: var(--z-modal);
  padding: 20px;
  overflow-y: auto;
}

/* 弹窗内容容器 */
.modal-container {
  background: var(--bg-primary);
  border-radius: 16px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  position: relative;
  max-width: 90vw;
  max-height: 90vh;
  overflow-y: auto;
}

/* 高优先级弹窗（如图片预览） */
.modal-overlay--high-priority {
  z-index: var(--z-modal-high);
  background-color: rgba(0, 0, 0, 0.9);
}

/* 弹窗使用示例（推荐模板） */
/*
<template>
  <!-- ✅ 正确：使用Teleport传送到body -->
  <Teleport to="body">
    <div class="modal-overlay" v-if="showModal" @click.self="closeModal">
      <div class="modal-container" @click.stop>
        <!-- 弹窗内容 -->
      </div>
    </div>
  </Teleport>
</template>

<!-- ❌ 错误：直接在组件内创建弹窗 -->
<div class="modal-overlay" v-if="showModal">
  <!-- 这样可能被父容器限制 -->
</div>
*/

/* 弹窗动画（可选） */
.modal-fade-enter-active,
.modal-fade-leave-active {
  transition: opacity 0.3s ease;
}

.modal-fade-enter-active .modal-container,
.modal-fade-leave-active .modal-container {
  transition: transform 0.3s ease;
}

.modal-fade-enter-from,
.modal-fade-leave-to {
  opacity: 0;
}

.modal-fade-enter-from .modal-container,
.modal-fade-leave-to .modal-container {
  transform: scale(0.9) translateY(-20px);
}

/* 响应式设计 */
@media (max-width: 768px) {
  .modal-overlay {
    padding: 10px;
  }
  
  .modal-container {
    max-width: 95vw;
    max-height: 95vh;
    border-radius: 12px;
  }
}

/* 滚动锁定工具类 */
.scroll-locked {
  overflow: hidden !important;
}

/**
 * 使用指南：
 * 
 * 1. 总是使用 <Teleport to="body"> 包装弹窗
 * 2. 使用预定义的z-index CSS变量
 * 3. 弹窗容器添加 @click.stop 防止事件冒泡
 * 4. 背景遮罩添加 @click.self 实现点击关闭
 * 5. 考虑添加滚动锁定和键盘事件处理
 * 
 * 示例组件结构：
 * - TimeWeather.vue ✅ (已修复)
 * - AuthorProfile.vue ✅ (已正确使用Teleport)
 * - BaseModal.vue ✅ (通用弹窗组件)
 */
