# JavaScript æ—¶é—´æˆ³å®Œå…¨æŒ‡å—

> ä¸€æ¬¡ææ‡‚æ—¶é—´æˆ³ï¼Œå†ä¹Ÿä¸æ··ä¹±ï¼ğŸ•

## ä¸€ã€ä»€ä¹ˆæ˜¯æ—¶é—´æˆ³ï¼Ÿ

### 1.1 é€šä¿—è§£é‡Š
**æ—¶é—´æˆ³**ï¼šä» **1970å¹´1æœˆ1æ—¥ 00:00:00 UTC** åˆ°ç°åœ¨ç»è¿‡çš„æ—¶é—´

å°±åƒä¸€ä¸ªè®¡æ—¶å™¨ï¼Œä»1970å¹´å¼€å§‹è®¡æ•°ï¼Œæ¯è¿‡1ç§’ï¼ˆæˆ–1æ¯«ç§’ï¼‰å°±+1ã€‚

```
æƒ³è±¡æˆï¼š
1970å¹´1æœˆ1æ—¥ = èµ·è·‘çº¿ï¼ˆ0ç±³ï¼‰
ç°åœ¨ = ä½ è·‘äº†å¤šå°‘ç±³ï¼ˆæ—¶é—´æˆ³ï¼‰
```

### 1.2 ä¸ºä»€ä¹ˆæ˜¯1970å¹´ï¼Ÿ
è¿™æ˜¯è®¡ç®—æœºçš„"å…ƒå¹´"ï¼Œå«åš **Unixçºªå…ƒ**ï¼ˆUnix Epochï¼‰ã€‚
æ‰€æœ‰ç¼–ç¨‹è¯­è¨€éƒ½ç»Ÿä¸€ç”¨è¿™ä¸ªæ ‡å‡†ï¼Œæ–¹ä¾¿å…¨çƒäº¤æµã€‚

### 1.3 æ—¶é—´æˆ³çš„ä¸¤ç§å•ä½

| ç±»å‹ | è¯´æ˜ | é•¿åº¦ | ç¤ºä¾‹ |
|-----|------|------|------|
| **ç§’æ—¶é—´æˆ³** | ä»1970å¹´åˆ°ç°åœ¨çš„ç§’æ•° | 10ä½ | `1700123456` |
| **æ¯«ç§’æ—¶é—´æˆ³** | ä»1970å¹´åˆ°ç°åœ¨çš„æ¯«ç§’æ•° | 13ä½ | `1700123456789` |

```javascript
// ğŸ”´ æœ€å®¹æ˜“ææ··çš„ç‚¹ï¼š
ç§’æ—¶é—´æˆ³ = 10ä½æ•°å­—  // åç«¯å¸¸ç”¨ï¼ˆPHPã€Pythonã€Javaç­‰ï¼‰
æ¯«ç§’æ—¶é—´æˆ³ = 13ä½æ•°å­— // å‰ç«¯å¸¸ç”¨ï¼ˆJavaScriptï¼‰

// JavaScripté»˜è®¤ç”¨æ¯«ç§’ï¼ï¼ï¼è®°ä½è¿™ä¸ªï¼
```

---

## äºŒã€å¦‚ä½•è·å–æ—¶é—´æˆ³

### 2.1 è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆ3ç§æ–¹æ³•ï¼‰

```javascript
// æ–¹æ³•1ï¼šDate.now() - æœ€ç®€å•æœ€å¸¸ç”¨ â­â­â­â­â­
const timestamp = Date.now();
console.log(timestamp); // 1700123456789ï¼ˆ13ä½æ¯«ç§’ï¼‰

// æ–¹æ³•2ï¼šnew Date().getTime()
const timestamp2 = new Date().getTime();
console.log(timestamp2); // 1700123456789ï¼ˆ13ä½æ¯«ç§’ï¼‰

// æ–¹æ³•3ï¼š+new Date() - ç®€å†™æŠ€å·§
const timestamp3 = +new Date();
console.log(timestamp3); // 1700123456789ï¼ˆ13ä½æ¯«ç§’ï¼‰

// ğŸ’¡ æ¨èç”¨ Date.now()ï¼Œæœ€æ¸…æ™°ï¼
```

### 2.2 è·å–æŒ‡å®šæ—¶é—´çš„æ—¶é—´æˆ³

```javascript
// å­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³
const time1 = new Date('2024-11-16').getTime();
const time2 = new Date('2024-11-16 18:30:00').getTime();
const time3 = new Date('2024/11/16 18:30:00').getTime();

// âš ï¸ æ³¨æ„ï¼šSafariæµè§ˆå™¨ä¸æ”¯æŒ '2024-11-16 18:30:00' æ ¼å¼
// æ¨èç”¨æ–œæ ï¼š'2024/11/16 18:30:00' æˆ– ISOæ ¼å¼
const safariOk = new Date('2024/11/16 18:30:00').getTime(); // âœ… å…¼å®¹
const isoFormat = new Date('2024-11-16T18:30:00').getTime(); // âœ… å…¼å®¹

// ä»å¹´æœˆæ—¥æ—¶åˆ†ç§’åˆ›å»º
const customTime = new Date(2024, 10, 16, 18, 30, 0).getTime();
// âš ï¸ æœˆä»½ä»0å¼€å§‹ï¼10ä»£è¡¨11æœˆï¼è¿™æ˜¯ä¸ªå¤§å‘ï¼
```

### 2.3 ç§’æ—¶é—´æˆ³ â†” æ¯«ç§’æ—¶é—´æˆ³è½¬æ¢

```javascript
// æ¯«ç§’ â†’ ç§’ï¼ˆÃ·1000ï¼‰
const msTimestamp = Date.now();           // 1700123456789
const sTimestamp = Math.floor(Date.now() / 1000); // 1700123456

// ç§’ â†’ æ¯«ç§’ï¼ˆÃ—1000ï¼‰
const secondsFromBackend = 1700123456;    // åç«¯è¿”å›çš„ç§’æ—¶é—´æˆ³
const milliseconds = secondsFromBackend * 1000; // 1700123456000

// ğŸ’¡ è®°å¿†æŠ€å·§ï¼š
// JavaScriptç”¨æ¯«ç§’ï¼Œåç«¯å¤§å¤šç”¨ç§’
// å‰ç«¯ â†’ åç«¯ï¼šÃ·1000
// åç«¯ â†’ å‰ç«¯ï¼šÃ—1000
```

---

## ä¸‰ã€æ—¶é—´æˆ³è½¬æ—¥æœŸæ ¼å¼

### 3.1 åŸºç¡€è½¬æ¢ï¼ˆåŸç”Ÿæ–¹æ³•ï¼‰

```javascript
const timestamp = 1700123456789;
const date = new Date(timestamp);

// è·å–å„éƒ¨åˆ†
date.getFullYear();  // 2023 - å¹´ä»½
date.getMonth();     // 10 - æœˆä»½ï¼ˆ0-11ï¼Œæ‰€ä»¥è¦+1ï¼ï¼‰
date.getDate();      // 16 - æ—¥æœŸ
date.getHours();     // 18 - å°æ—¶
date.getMinutes();   // 30 - åˆ†é’Ÿ
date.getSeconds();   // 56 - ç§’
date.getDay();       // 4 - æ˜ŸæœŸå‡ ï¼ˆ0æ˜¯å‘¨æ—¥ï¼Œ1æ˜¯å‘¨ä¸€...ï¼‰

// âš ï¸ å¤§å‘ï¼šgetMonth() è¿”å› 0-11ï¼Œè®°å¾— +1ï¼
console.log(date.getMonth() + 1); // æ­£ç¡®çš„æœˆä»½
```

### 3.2 æ‰‹å†™æ ¼å¼åŒ–å‡½æ•°ï¼ˆé€šç”¨ï¼‰

```javascript
/**
 * æ—¶é—´æˆ³æ ¼å¼åŒ–
 * @param {number} timestamp - æ—¶é—´æˆ³ï¼ˆç§’æˆ–æ¯«ç§’éƒ½è¡Œï¼Œè‡ªåŠ¨è¯†åˆ«ï¼‰
 * @param {string} format - æ ¼å¼ï¼š'YYYY-MM-DD HH:mm:ss'
 */
function formatTimestamp(timestamp, format = 'YYYY-MM-DD HH:mm:ss') {
  // è‡ªåŠ¨è¯†åˆ«ç§’/æ¯«ç§’æ—¶é—´æˆ³
  if (timestamp.toString().length === 10) {
    timestamp = timestamp * 1000; // ç§’è½¬æ¯«ç§’
  }
  
  const date = new Date(timestamp);
  
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0'); // è¡¥0
  const day = String(date.getDate()).padStart(2, '0');
  const hour = String(date.getHours()).padStart(2, '0');
  const minute = String(date.getMinutes()).padStart(2, '0');
  const second = String(date.getSeconds()).padStart(2, '0');
  
  // æ›¿æ¢æ ¼å¼
  return format
    .replace('YYYY', year)
    .replace('MM', month)
    .replace('DD', day)
    .replace('HH', hour)
    .replace('mm', minute)
    .replace('ss', second);
}

// ä½¿ç”¨ç¤ºä¾‹
formatTimestamp(1700123456789);                    // '2023-11-16 18:30:56'
formatTimestamp(1700123456);                       // '2023-11-16 18:30:56'ï¼ˆè‡ªåŠ¨è¯†åˆ«ç§’ï¼‰
formatTimestamp(1700123456789, 'YYYY/MM/DD');     // '2023/11/16'
formatTimestamp(1700123456789, 'YYYYå¹´MMæœˆDDæ—¥'); // '2023å¹´11æœˆ16æ—¥'
formatTimestamp(1700123456789, 'MM-DD HH:mm');    // '11-16 18:30'
```

### 3.3 ä½¿ç”¨ Day.js åº“ï¼ˆæ¨èï¼‰â­

```javascript
// 1. å®‰è£…ï¼šnpm install dayjs

// 2. ä½¿ç”¨
import dayjs from 'dayjs';

// æ ¼å¼åŒ–æ—¶é—´æˆ³
dayjs(1700123456789).format('YYYY-MM-DD HH:mm:ss'); // '2023-11-16 18:30:56'
dayjs(1700123456789).format('YYYY/MM/DD');          // '2023/11/16'
dayjs(1700123456789).format('MMæœˆDDæ—¥ HH:mm');      // '11æœˆ16æ—¥ 18:30'

// ç§’æ—¶é—´æˆ³ä¹Ÿå¯ä»¥ï¼ˆéœ€è¦ Ã—1000 æˆ–ç”¨ unix() æ–¹æ³•ï¼‰
dayjs.unix(1700123456).format('YYYY-MM-DD');        // '2023-11-16'

// ğŸ’¡ Day.js åªæœ‰ 2KBï¼Œæ¯” Moment.js å°å¾ˆå¤šï¼Œå¼ºçƒˆæ¨èï¼
```

---

## å››ã€æ—¥æœŸæ ¼å¼è½¬æ—¶é—´æˆ³

### 4.1 å­—ç¬¦ä¸²è½¬æ—¶é—´æˆ³

```javascript
// å¸¸è§æ ¼å¼
new Date('2024-11-16').getTime();              // âœ… æ¨è
new Date('2024/11/16').getTime();              // âœ… æ¨èï¼ˆå…¼å®¹æ€§å¥½ï¼‰
new Date('2024-11-16 18:30:00').getTime();     // âš ï¸ Safariä¸æ”¯æŒ
new Date('2024/11/16 18:30:00').getTime();     // âœ… æ¨è
new Date('2024-11-16T18:30:00').getTime();     // âœ… ISOæ ¼å¼ï¼ˆæœ€æ ‡å‡†ï¼‰

// ğŸ’¡ è·¨æµè§ˆå™¨å…¼å®¹æ–¹æ¡ˆ
function parseDate(dateStr) {
  // å°† '-' æ›¿æ¢ä¸º '/'ï¼Œå…¼å®¹æ‰€æœ‰æµè§ˆå™¨
  return new Date(dateStr.replace(/-/g, '/')).getTime();
}

parseDate('2024-11-16 18:30:00'); // å®Œç¾å…¼å®¹
```

### 4.2 Dateå¯¹è±¡è½¬æ—¶é—´æˆ³

```javascript
const now = new Date();
const timestamp = now.getTime();

// æˆ–è€…ç®€å†™
const timestamp2 = +new Date();
```

---

## äº”ã€æ—¶é—´è®¡ç®—

### 5.1 è®¡ç®—æ—¶é—´å·®

```javascript
// è®¡ç®—ä¸¤ä¸ªæ—¶é—´æˆ³çš„å·®å€¼
const start = new Date('2024/11/16 09:00:00').getTime();
const end = new Date('2024/11/16 18:00:00').getTime();

const diff = end - start; // æ¯«ç§’å·®

// è½¬æ¢ä¸ºå„ç§å•ä½
const diffSeconds = Math.floor(diff / 1000);           // ç§’
const diffMinutes = Math.floor(diff / 1000 / 60);      // åˆ†é’Ÿ
const diffHours = Math.floor(diff / 1000 / 60 / 60);   // å°æ—¶
const diffDays = Math.floor(diff / 1000 / 60 / 60 / 24); // å¤©

console.log(`ç›¸å·® ${diffHours} å°æ—¶`); // ç›¸å·® 9 å°æ—¶

// ğŸ’¡ è®°å¿†ï¼š
// 1ç§’ = 1000æ¯«ç§’
// 1åˆ†é’Ÿ = 60ç§’
// 1å°æ—¶ = 60åˆ†é’Ÿ
// 1å¤© = 24å°æ—¶
```

### 5.2 å®ç”¨å·¥å…·å‡½æ•°

```javascript
// åˆ¤æ–­æ˜¯å¦æ˜¯ä»Šå¤©
function isToday(timestamp) {
  const date = new Date(timestamp);
  const today = new Date();
  return date.toDateString() === today.toDateString();
}

// åˆ¤æ–­æ˜¯å¦æ˜¯æ˜¨å¤©
function isYesterday(timestamp) {
  const date = new Date(timestamp);
  const yesterday = new Date();
  yesterday.setDate(yesterday.getDate() - 1);
  return date.toDateString() === yesterday.toDateString();
}

// è·å–å‡ å¤©å‰/åçš„æ—¶é—´æˆ³
function getDaysAgo(days) {
  return Date.now() - days * 24 * 60 * 60 * 1000;
}

function getDaysLater(days) {
  return Date.now() + days * 24 * 60 * 60 * 1000;
}

// ä½¿ç”¨
isToday(Date.now());           // true
isYesterday(getDaysAgo(1));    // true
getDaysAgo(7);                 // 7å¤©å‰çš„æ—¶é—´æˆ³
getDaysLater(7);               // 7å¤©åçš„æ—¶é—´æˆ³
```

### 5.3 å€’è®¡æ—¶å®ç°

```javascript
/**
 * å€’è®¡æ—¶
 * @param {number} endTimestamp - ç»“æŸæ—¶é—´æˆ³
 */
function countdown(endTimestamp) {
  const now = Date.now();
  const diff = endTimestamp - now;
  
  if (diff <= 0) {
    return 'å·²ç»“æŸ';
  }
  
  const days = Math.floor(diff / (1000 * 60 * 60 * 24));
  const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((diff % (1000 * 60)) / 1000);
  
  return `${days}å¤© ${hours}å°æ—¶ ${minutes}åˆ†é’Ÿ ${seconds}ç§’`;
}

// ä½¿ç”¨
const endTime = new Date('2024/12/31 23:59:59').getTime();
setInterval(() => {
  console.log(countdown(endTime));
}, 1000);
```

---

## å…­ã€å¸¸è§åœºæ™¯å®æˆ˜

### 6.1 æ˜¾ç¤º"åˆšåˆš"ã€"3åˆ†é’Ÿå‰"ç­‰

```javascript
function timeAgo(timestamp) {
  // è‡ªåŠ¨è¯†åˆ«ç§’/æ¯«ç§’
  if (timestamp.toString().length === 10) {
    timestamp = timestamp * 1000;
  }
  
  const now = Date.now();
  const diff = now - timestamp;
  
  const second = 1000;
  const minute = second * 60;
  const hour = minute * 60;
  const day = hour * 24;
  const month = day * 30;
  const year = day * 365;
  
  if (diff < minute) {
    return 'åˆšåˆš';
  } else if (diff < hour) {
    return Math.floor(diff / minute) + 'åˆ†é’Ÿå‰';
  } else if (diff < day) {
    return Math.floor(diff / hour) + 'å°æ—¶å‰';
  } else if (diff < day * 2) {
    return 'æ˜¨å¤©';
  } else if (diff < month) {
    return Math.floor(diff / day) + 'å¤©å‰';
  } else if (diff < year) {
    return Math.floor(diff / month) + 'ä¸ªæœˆå‰';
  } else {
    return Math.floor(diff / year) + 'å¹´å‰';
  }
}

// ä½¿ç”¨
timeAgo(Date.now() - 30000);      // 'åˆšåˆš'
timeAgo(Date.now() - 300000);     // '5åˆ†é’Ÿå‰'
timeAgo(Date.now() - 7200000);    // '2å°æ—¶å‰'
```

### 6.2 åç«¯æ¥å£å¯¹æ¥ï¼ˆé‡ç‚¹ï¼‰â­â­â­

```javascript
// åœºæ™¯1ï¼šåç«¯è¿”å›ç§’æ—¶é—´æˆ³ï¼Œå‰ç«¯è¦æ˜¾ç¤º
const apiData = {
  createTime: 1700123456  // åç«¯è¿”å›10ä½ç§’æ—¶é—´æˆ³
};

// âŒ é”™è¯¯åšæ³•ï¼šç›´æ¥ç”¨ä¼šæ˜¾ç¤º1970å¹´
new Date(apiData.createTime).getTime(); // é”™è¯¯ï¼

// âœ… æ­£ç¡®åšæ³•ï¼šå…ˆè½¬æˆæ¯«ç§’
const msTimestamp = apiData.createTime * 1000;
formatTimestamp(msTimestamp); // '2023-11-16 18:30:56'

// åœºæ™¯2ï¼šå‰ç«¯è¦ä¼ æ—¶é—´æˆ³ç»™åç«¯
const data = {
  startTime: Math.floor(Date.now() / 1000)  // å‰ç«¯13ä½è½¬10ä½ç»™åç«¯
};

// ğŸ’¡ è®°ä½ï¼š
// å‰ç«¯ Date.now() æ˜¯13ä½æ¯«ç§’
// åç«¯å¤§å¤šè¦10ä½ç§’ï¼ˆÃ·1000å¹¶å‘ä¸‹å–æ•´ï¼‰
```

### 6.3 æ—¶é—´é€‰æ‹©å™¨å€¼å¤„ç†

```javascript
// uni-app / å°ç¨‹åº æ—¶é—´é€‰æ‹©å™¨
export default {
  data() {
    return {
      dateValue: '',  // æ˜¾ç¤ºçš„æ—¥æœŸ
      timestamp: 0    // ä¿å­˜çš„æ—¶é—´æˆ³
    }
  },
  methods: {
    // é€‰æ‹©æ—¥æœŸ
    onDateChange(e) {
      this.dateValue = e.detail.value; // '2024-11-16'
      
      // è½¬æˆæ—¶é—´æˆ³ä¿å­˜
      this.timestamp = new Date(e.detail.value.replace(/-/g, '/')).getTime();
    },
    
    // æäº¤æ—¶
    submit() {
      const data = {
        time: Math.floor(this.timestamp / 1000) // è½¬æˆç§’ç»™åç«¯
      };
      // å‘é€è¯·æ±‚...
    }
  }
}
```

### 6.4 åˆ¤æ–­æ—¶é—´æ˜¯å¦è¿‡æœŸ

```javascript
// åˆ¤æ–­tokenæ˜¯å¦è¿‡æœŸ
function isTokenExpired(expireTime) {
  // expireTime å¯èƒ½æ˜¯ç§’æˆ–æ¯«ç§’
  if (expireTime.toString().length === 10) {
    expireTime = expireTime * 1000;
  }
  return Date.now() > expireTime;
}

// ä½¿ç”¨
const tokenExpire = 1700123456; // åç«¯è¿”å›çš„è¿‡æœŸæ—¶é—´
if (isTokenExpired(tokenExpire)) {
  console.log('tokenå·²è¿‡æœŸï¼Œéœ€è¦é‡æ–°ç™»å½•');
} else {
  console.log('tokenæœ‰æ•ˆ');
}
```

---

## ä¸ƒã€å¸¸è§å‘ç‚¹æ€»ç»“ âš ï¸

### å‘ç‚¹1ï¼šç§’å’Œæ¯«ç§’ææ··

```javascript
// âŒ åç«¯è¿”å›ç§’ï¼Œå‰ç«¯ç›´æ¥ç”¨
const timestamp = 1700123456; // 10ä½ç§’
new Date(timestamp); // æ˜¾ç¤º1970å¹´ï¼é”™äº†ï¼

// âœ… æ­£ç¡®ï¼šå…ˆè½¬æ¯«ç§’
new Date(timestamp * 1000); // 2023å¹´ï¼Œå¯¹äº†ï¼
```

### å‘ç‚¹2ï¼šæœˆä»½ä»0å¼€å§‹

```javascript
// âŒ é”™è¯¯
new Date(2024, 11, 16); // è¿™æ˜¯2024å¹´12æœˆ16æ—¥ï¼Œä¸æ˜¯11æœˆï¼

// âœ… æ­£ç¡®
new Date(2024, 10, 16); // 2024å¹´11æœˆ16æ—¥ï¼ˆæœˆä»½è¦-1ï¼‰

// è·å–æœˆä»½ä¹Ÿè¦+1
const date = new Date();
console.log(date.getMonth() + 1); // æ­£ç¡®çš„æœˆä»½
```

### å‘ç‚¹3ï¼šSafariæµè§ˆå™¨å…¼å®¹æ€§

```javascript
// âŒ Safari ä¸æ”¯æŒ
new Date('2024-11-16 18:30:00'); // SafariæŠ¥é”™ï¼

// âœ… å…¼å®¹å†™æ³•
new Date('2024/11/16 18:30:00');        // ç”¨æ–œæ 
new Date('2024-11-16T18:30:00');        // ISOæ ¼å¼
new Date('2024-11-16 18:30:00'.replace(/-/g, '/')); // æ›¿æ¢
```

### å‘ç‚¹4ï¼šæ—¶åŒºé—®é¢˜

```javascript
// æ—¶é—´æˆ³æ˜¯UTCæ—¶é—´ï¼ˆé›¶æ—¶åŒºï¼‰
// ä½† new Date() ä¼šè½¬æˆæœ¬åœ°æ—¶åŒº

const timestamp = 1700123456000;
const date = new Date(timestamp);

date.toString();     // æœ¬åœ°æ—¶åŒºæ—¶é—´
date.toUTCString();  // UTCæ—¶é—´

// å¦‚æœåç«¯ç»™çš„æ˜¯UTCæ—¶é—´å­—ç¬¦ä¸²
const utcStr = '2024-11-16T10:30:00Z'; // æ³¨æ„æœ‰Z
new Date(utcStr).getTime(); // è‡ªåŠ¨è½¬æœ¬åœ°æ—¶åŒºçš„æ—¶é—´æˆ³
```

### å‘ç‚¹5ï¼šå–æ•´é—®é¢˜

```javascript
// âŒ æ¯«ç§’è½¬ç§’ï¼Œä¸å–æ•´
const seconds = Date.now() / 1000; // 1700123456.789ï¼ˆæœ‰å°æ•°ï¼ï¼‰

// âœ… è¦å‘ä¸‹å–æ•´
const seconds = Math.floor(Date.now() / 1000); // 1700123456ï¼ˆæ•´æ•°ï¼‰
```

---

## å…«ã€å¿«é€Ÿè®°å¿†å¡ç‰‡ ğŸ¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ• æ—¶é—´æˆ³æ ¸å¿ƒçŸ¥è¯†                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. JavaScripté»˜è®¤ç”¨æ¯«ç§’ï¼ˆ13ä½ï¼‰          â”‚
â”‚ 2. åç«¯å¤§å¤šç”¨ç§’ï¼ˆ10ä½ï¼‰                  â”‚
â”‚ 3. å‰ç«¯â†’åç«¯ï¼šÃ·1000 (å‘ä¸‹å–æ•´)           â”‚
â”‚ 4. åç«¯â†’å‰ç«¯ï¼šÃ—1000                      â”‚
â”‚ 5. æœˆä»½ä»0å¼€å§‹ï¼Œè®°å¾—+1                   â”‚
â”‚ 6. Safariä¸æ”¯æŒ '-' åˆ†éš”çš„æ—¶é—´å­—ç¬¦ä¸²     â”‚
â”‚ 7. è·å–å½“å‰æ—¶é—´æˆ³ç”¨ Date.now()           â”‚
â”‚ 8. æ¨èç”¨ Day.js å¤„ç†æ—¶é—´                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä¹ã€å®ç”¨ä»£ç ç‰‡æ®µï¼ˆç›´æ¥å¤åˆ¶ç”¨ï¼‰

```javascript
// ===== å·¥å…·å‡½æ•°åˆé›† =====

// 1. æ—¶é—´æˆ³æ ¼å¼åŒ–ï¼ˆè‡ªåŠ¨è¯†åˆ«ç§’/æ¯«ç§’ï¼‰
function formatTime(timestamp, format = 'YYYY-MM-DD HH:mm:ss') {
  if (timestamp.toString().length === 10) timestamp *= 1000;
  const d = new Date(timestamp);
  const opt = {
    'YYYY': d.getFullYear(),
    'MM': String(d.getMonth() + 1).padStart(2, '0'),
    'DD': String(d.getDate()).padStart(2, '0'),
    'HH': String(d.getHours()).padStart(2, '0'),
    'mm': String(d.getMinutes()).padStart(2, '0'),
    'ss': String(d.getSeconds()).padStart(2, '0')
  };
  return Object.keys(opt).reduce((str, key) => 
    str.replace(key, opt[key]), format);
}

// 2. è·å–ä»Šå¤©0ç‚¹æ—¶é—´æˆ³
function getTodayStart() {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  return today.getTime();
}

// 3. è·å–ä»Šå¤©23:59:59æ—¶é—´æˆ³
function getTodayEnd() {
  const today = new Date();
  today.setHours(23, 59, 59, 999);
  return today.getTime();
}

// 4. åˆ¤æ–­æ˜¯å¦åŒä¸€å¤©
function isSameDay(timestamp1, timestamp2) {
  const d1 = new Date(timestamp1);
  const d2 = new Date(timestamp2);
  return d1.getFullYear() === d2.getFullYear() &&
         d1.getMonth() === d2.getMonth() &&
         d1.getDate() === d2.getDate();
}

// 5. è·å–æ˜ŸæœŸå‡ ï¼ˆä¸­æ–‡ï¼‰
function getWeekDay(timestamp) {
  const weekDays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
  return 'æ˜ŸæœŸ' + weekDays[new Date(timestamp).getDay()];
}

// 6. å®‰å…¨çš„æ—¥æœŸè§£æï¼ˆå…¼å®¹Safariï¼‰
function safeParseDate(dateStr) {
  return new Date(dateStr.replace(/-/g, '/')).getTime();
}
```

---

## åã€è°ƒè¯•æŠ€å·§

```javascript
// åœ¨æ§åˆ¶å°å¿«é€ŸæŸ¥çœ‹æ—¶é—´æˆ³
console.log('å½“å‰æ—¶é—´æˆ³:', Date.now());
console.log('å¯è¯»æ—¶é—´:', new Date());

// éªŒè¯æ—¶é—´æˆ³æ˜¯å¦æ­£ç¡®
const test = 1700123456789;
console.log('æ—¶é—´æˆ³:', test);
console.log('è½¬æ—¥æœŸ:', new Date(test));
console.log('æ ¼å¼åŒ–:', formatTime(test));

// æ£€æŸ¥æ˜¯ç§’è¿˜æ˜¯æ¯«ç§’
function checkTimestamp(ts) {
  const length = ts.toString().length;
  if (length === 10) {
    console.log('è¿™æ˜¯ç§’æ—¶é—´æˆ³ï¼Œéœ€è¦ Ã—1000');
  } else if (length === 13) {
    console.log('è¿™æ˜¯æ¯«ç§’æ—¶é—´æˆ³ï¼Œå¯ä»¥ç›´æ¥ç”¨');
  } else {
    console.log('æ—¶é—´æˆ³æ ¼å¼ä¸å¯¹ï¼');
  }
}
```

---

## ğŸ“š æ¨èèµ„æº

- **Day.js** (è½»é‡çº§æ—¶é—´åº“)ï¼šhttps://day.js.org/
- **MDN Dateæ–‡æ¡£**ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Date
- **æ—¶é—´æˆ³åœ¨çº¿è½¬æ¢å·¥å…·**ï¼šhttps://tool.lu/timestamp/

---

ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼š
1. è®°ä½JavaScriptç”¨æ¯«ç§’ï¼Œåç«¯å¤§å¤šç”¨ç§’
2. å¸¸ç”¨çš„å°±æ˜¯ `Date.now()` å’Œ `new Date(timestamp).getTime()`
3. æœˆä»½ä»0å¼€å§‹ï¼Œè®°å¾—+1
4. å®åœ¨æä¸æ¸…å°±ç”¨ Day.js åº“ï¼Œçœå¿ƒï¼
5. æŠŠå¸¸ç”¨å·¥å…·å‡½æ•°ä¿å­˜åˆ°è‡ªå·±çš„ä»£ç ç‰‡æ®µåº“

ğŸ¯ **ä¸€å¥è¯æ€»ç»“**ï¼šå‰ç«¯ç”¨æ¯«ç§’ï¼ˆ13ä½ï¼‰ï¼Œåç«¯ç”¨ç§’ï¼ˆ10ä½ï¼‰ï¼Œäº’ç›¸è½¬æ¢è®°å¾— Ã—1000 æˆ– Ã·1000ï¼
